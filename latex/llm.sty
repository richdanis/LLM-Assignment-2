\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{llm}[2014/08/24 Example LaTeX package]

%%% Colors
\usepackage{colortbl}
\usepackage[dvipsnames]{xcolor}

% ETH colors
\definecolor{ETHBlue}{RGB}{33,92,175}	% blue 
\definecolor{ETHGreen}{RGB}{98,115,19}		% green
\definecolor{ETHPurpleDark}{RGB}{140,10,89}	% purple
\definecolor{ETHPurple}{RGB}{163,7,116}	% purple
\definecolor{ETHGray}{RGB}{111,111,111}	% gray
\definecolor{ETHRed}{RGB}{183,53,45}	% red
\definecolor{ETHPetrol}{RGB}{0,120,148}	% green/blue 
\definecolor{ETHBronze}{RGB}{142,103,19}	% bronze

% ETH color aliases 
\colorlet{ETHdarkblue}{ETHBlue!80!black}
\colorlet{ETHdarkgreen}{ETHGreen!80!black}
\colorlet{ETHpink}{ETHPurple}
\colorlet{ETHgray}{ETHGray}
\colorlet{ETHred}{ETHRed}
\colorlet{ETHgreenblue}{ETHPetrol}
\colorlet{ETHbrown}{ETHBronze}


\iftoggle{publish-notes}{
    \colorlet{MacroColor}{black}
}{
    \colorlet{MacroColor}{ETHPetrol}
}

\colorlet{MACROCOLOR}{MacroColor}

\usepackage[margin=2cm]{geometry}
\usepackage[english]{babel}
\usepackage[utf8]{inputenc}

\usepackage{imakeidx}
\makeindex[columns=2, options= -s indexstyle.ist]

\usepackage{pdfpages}

% math packages
\usepackage{amsthm}
\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{amssymb}
\usepackage{natbib}
\usepackage{xfrac}
\usepackage{mathtools}
\usepackage{bm}
\usepackage{bbm}
\usepackage{blkarray}
\usepackage{nicefrac}
\usepackage{xspace}
\usepackage[makeroom]{cancel}

\usepackage{datetime}

\usepackage{xcolor}
\usepackage{url}
\usepackage{booktabs}
\usepackage{multirow}
\usepackage{blindtext}
\usepackage{microtype}
\usepackage{inconsolata}
\usepackage{scalerel}
\usepackage{thmtools} 
\usepackage{thm-restate}

\renewcommand{\qedsymbol}{$\blacksquare$}

% \usepackage{hyperref}
\definecolor{darkblue}{rgb}{0.0,0.0,0.5}
\usepackage[linktocpage=true,colorlinks=true,citecolor=darkblue,
  linkcolor=darkblue, urlcolor=darkblue]{hyperref}

% code rendering
\usepackage{minted}
%\usepackage{textgreek}

\usepackage{caption}
\usepackage{subcaption}
\usepackage{listings}

% tikz packages
\usepackage{tikz}
\usetikzlibrary{automata, fit, positioning, matrix, arrows.meta, decorations.pathmorphing, shapes, shapes.multipart, chains,shadows.blur}

% plotting packages
\usepackage{tikz-qtree}

%tikz FSA settings
\tikzset{
-{Latex[length=1.8mm, width=1.4mm]}, 
every state/.style={thick, fill=gray!10},
every loop/.append style=-{Latex[length=1.8mm, width=1.4mm]},
initial text=$ $,
line width=0.7pt,
node distance=10mm,
minimum size=4mm,
}

% library name
\newcommand{\rayuela}{\textsf{rayuela}\xspace}

% other packages
% \usepackage{emoji}
\usepackage{enumitem}
\usepackage{xparse}


% \usepackage{exercise}
% \renewcommand{\ExerciseHeader}{\noindent\bfseries\ExerciseName\ \ExerciseHeaderNB}

% transforms
% https://tex.stackexchange.com/questions/390405/how-do-you-typeset-a-horizontally-flipped-nicefrac
\usepackage{graphicx, nicefrac}
\usepackage{adjustbox}
\usepackage{relsize}


% Custom environments
\newtheorem{definition}{Definition}
\newtheorem{assumption}{Assumption}
\newtheorem{lemma}{Lemma}
\newtheorem{theorem}{Theorem}
\newtheorem{aquestion}{Question}
\newtheorem{proposition}{Proposition}
\newtheorem{example}{Example}
\newtheorem{principle}{Principle}
\newtheorem{corollary}{Corollary}

%% Cleveref settings
\usepackage{cleveref}
\crefname{section}{\S}{\S\S}
\crefname{table}{Tab.}{Tabs.}
\crefname{figure}{Fig.}{Figs.}
\crefname{algorithm}{Algorithm}{Algorithms}
\crefname{equation}{Eq.}{Eqs.}
\crefname{example}{Example}{Examples}
\crefname{appendix}{Appendix}{Appendices}
\crefname{theorem}{Theorem}{Theorems}
\crefname{aquestion}{Question}{Questions}
\crefname{assumption}{Assumption}{Assumptions}
\crefname{lemma}{Lemma}{Lemmas}
\crefname{proposition}{Proposition}{Propositions}
\crefname{line}{line}{lines}
\crefname{definition}{Definition}{}
\crefname{subquestion}{Subquestion}{}
\crefname{question}{Question}{}
\crefname{corollary}{Corollary}{}
\crefname{Exercise}{Exercise}{}
\crefformat{section}{\S#2#1#3} 


% TODO notes
\iftoggle{publish-notes}{
    \usepackage[disable]{todonotes}
}{
    \usepackage{todonotes}
}
\makeatletter
\newcommand*\iftodonotes{\if@todonotes@disabled\expandafter\@secondoftwo\else\expandafter\@firstoftwo\fi}  %
\makeatother
\newcommand{\noindentaftertodo}{\iftodonotes{\noindent}{}}
\newcommand{\fixme}[2][]{\todo[color=yellow,size=\scriptsize,fancyline,caption={},#1]{#2}}
% \renewcommand{\note}[4][]{\todo[author=#2,color=#3,size=\scriptsize,fancyline,caption={},#1]{#4}} % default note settings, used by macros below.
\newcommand{\note}[4][]{\todo[author=#2,color=#3,size=\scriptsize,fancyline,caption={},#1]{#4}} % default note settings, used by macros below.

\newcommand{\ryan}[2][]{\note[#1]{ryan}{violet!40}{#2}}
\newcommand{\clara}[2][]{\note[#1]{clara}{orange!40}{#2}}
\newcommand{\nik}[2][]{\note[#1]{nik}{yellow!40}{#2}}
\newcommand{\afra}[2][]{\note[#1]{afra}{coral}{#2}}
\newcommand{\anej}[2][]{\note[#1]{anej}{lime}{#2}}
\newcommand{\leo}[2][]{\note[#1]{leo}{cyan}{#2}}
\newcommand{\clem}[2][]{\note[#1]{clem}{pink}{#2}}
\newcommand{\tianyu}[2][]{\note[#1]{tianyu}{red!40}{#2}}
\newcommand{\luca}[2][]{\note[#1]{luca}{magenta}{#2}}

\newcommand{\Ryan}[2][]{\ryan[inline,#1]{#2}\noindentaftertodo}
\newcommand{\Anej}[2][]{\anej[inline,#1]{#2}\noindentaftertodo}
\newcommand{\Leo}[2][]{\leo[inline,#1]{#2}\noindentaftertodo}
\newcommand{\Andreas}[2][]{\andreas[inline,#1]{#2}\noindentaftertodo}
\newcommand{\Eleanor}[2][]{\eleanor[inline,#1]{#2}\noindentaftertodo}
\newcommand{\Alexandra}[2][]{\alexandra[inline,#1]{#2}\noindentaftertodo}
\newcommand{\Timv}[2][]{\timv[inline,#1]{#2}\noindentaftertodo}
\newcommand{\Clem}[2][]{\clem[inline,#1]{#2}\noindentaftertodo}
\newcommand{\Luca}[2][]{\luca[inline,#1]{#2}\noindentaftertodo}

\newcommand{\response}[1]{\vspace{3pt}\hrule\vspace{3pt}\textbf{#1:}}    % insert \response{myname} within someone else's todonote

% algorithms stuff
\usepackage{algorithm}
\usepackage[noend]{algpseudocode}  % do not also use algorithmic
\algrenewcommand\algorithmicindent{1.0em}%
\renewcommand\algorithmicdo{:}
\renewcommand\algorithmicthen{:}
\newcommand{\rightcomment}[1]{{\color{gray} \(\triangleright\) {\footnotesize\textit{#1}}}}
\algrenewcommand{\algorithmiccomment}[1]{\hfill \rightcomment{#1}}  % redefines \Comment
\algnewcommand{\LineComment}[1]{\State\rightcomment{#1}}
\algnewcommand{\LinesComment}[1]{\State\rightcomment{\parbox[t]{.95\linewidth-\leftmargin-\widthof{\(\triangleright\) }}{#1}}}
\renewcommand\algorithmicdo{:}
\renewcommand\algorithmicthen{:}
\algrenewcommand\alglinenumber[1]{{\tiny\color{black!50}#1.}\hspace{-2pt}}

\newcommand{\algorithmicfunc}[1]{\textbf{def} {#1}:}
\algdef{SE}[FUNC]{Func}{EndFunc}[1]{\algorithmicfunc{#1}}{}
\makeatletter
\ifthenelse{\equal{\ALG@noend}{t}}%
  {\algtext*{EndFunc}}
  {}%
\makeatother